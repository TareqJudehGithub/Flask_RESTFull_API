<!--search-form.html renders Advanced Search form-->
<!doctype html>
<html lang="en">
  <head>
    {% extends 'template.html' %}
    {% block head %}
    {{ super() }}
    {% endblock %}
  </head>
  <body>
    {% block content %}
    <div class="col-lg-4 col-md-12 col-sm-12 shadow-sm adv-col-1">
      <form action="{{ url_for('search_movies') }}" method="POST" class="row g-3 adv-search-form">
        <h4>Looking for a certain title?</h4>
        <div class="col-sm-12">
          <div class="form-floating">
            <input type="text" class="form-control" id="floatingTitle" name="title" placeholder="Movie title" required>
            <label for="floatingTitle">Title</label>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-floating">
            <input type="number" class="form-control" id="floatingYear" name="year" placeholder="Year">
            <label for="floatingYear">Year</label>
          </div>
        </div>

        <div class="col-sm-12">
          <select class="form-select select-type" name="type" aria-label="Default select example">
            <option value="movie" selected>Type</option>
            <option value="movie">Movie</option>
            <option value="series">Series</option>
          </select>
        </div>

        <button class="btn btn-outline-dark mt-4 mb-3" type="submit">Search</button>

      </form>
    </div>

    {% endblock %}

    {% block form %}

    {% if movie %}

    <!--Check if title has an image/poster -->
    {% if movie.Poster %}

    <div class="col-lg-4 col-md-6 col-sm-12 adv-col-2">
      <img src="{{ movie.Poster | safe }}" class="img-fluid rounded adv-img" alt="movie poster">
    </div>
    {% endif %}

    <!-- title details-->
    <div class="col-lg-4 col-md-6 col-sm-12 adv-col-3">
      <div class="adv-title-info">
        <div class="card-body" style="text-align:left;">
          <h3 class="card-title">{{ movie.Title | title | safe }}</h3>
          <p class="card-text"><strong>{{ movie.Year | safe }} | {{ movie.Rated | safe }}</strong></p>

          <!--Check if title has a Genre data -->
          {% if movie.Genre %}
          <!--Iterate over each Genre item and render it as a button -->
          {% for item in movie.Genre.split(",") %}
          <button class="btn btn-dark disabled mb-3 genre-button">{{ item | safe }}</button>
          {% endfor %}
          {% endif %}
          <p>{{ movie.Plot }}</p>
          <p class="card-text"><strong>Director</strong> {{ movie.Director }}</p>
          <p class="card-text"><strong>Stars</strong> {{ movie.Actors }}</p>
          <p class="card-text"><strong>IMDB</strong> {{ movie.imdbRating }}/10</p>
        </div>
      </div>
    </div>

    {% else %}
    <div></div>
    {% endif %}
    {% endblock %}

  </body>
</html>
